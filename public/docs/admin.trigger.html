<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>Trigger options // Swarm 2016.2 Guide</title>
      <meta name="generator" content="DocBook XSL Stylesheets V1.78.1 with Perforce customizations" />
      <link rel="home" href="copyright.html" title="Swarm 2016.2 Guide" />
      <link rel="up" href="chapter.administration.html" title="Administration" />
      <link rel="prev" href="admin.system_information.html" title="System Information" />
      <link rel="next" href="admin.unapprove_modified.html" title="Unapprove modified reviews" />
      <meta name="Section-title" content="Trigger options" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.css" />
      <link rel="stylesheet" href="vendor/prettify/prettify.css" />
      <link rel="stylesheet" href="css/perforce.css" />
      <link rel="stylesheet" href="css/print.css" media="print" />
      <link rel="shortcut icon" href="images/favicon.ico" />
      <!--[if lt IE 9]>
  <script type="text/javascript" src="vendor/respond/respond.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/ie.css"/>
<![endif]-->
      <link rel="stylesheet" type="text/css" href="css/swarm.css" />
   </head>
   <body><a id="page-top"></a><div id="header">
         <div class="container"><button name="toc" type="button" class="toc"><span class="glyphicon glyphicon-list"></span></button><span class="logo"><a href="http://www.perforce.com/documentation"></a></span><h1><a href="index.html" class="title"><span class="brand"></span><span class="guide-title">Swarm 2016.2 Guide</span><span class="guide-subtitle">
                                   (September 2016)
                                 </span></a></h1><button name="search" type="button" class="search" title="Search this guide"><span class="glyphicon glyphicon-search"></span></button></div>
         <div id="progress"></div>
      </div>
      <div id="content" class="content" tabindex="-1">
         <div class="container">
            <!---->
            <div class="section" id="admin.trigger">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both">Trigger options</h2>
                     </div>
                  </div>
               </div>
               <p>
                      The Swarm trigger script, <code class="filename">swarm-trigger.pl</code>, provides
                      the following command line options and configuration items.
                    
               </p>
               <div class="section" id="admin.trigger.options">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title">Command-line options</h3>
                        </div>
                     </div>
                  </div>
                  <div class="section" id="admin.trigger.options.synopsis">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title">Synopsis</h4>
                           </div>
                        </div>
                     </div>
                     <div class="literallayout">
                        <p><span class="command"><strong>swarm-trigger.pl -t <em class="replaceable"><code>type</code></em> -v <em class="replaceable"><code>ID</code></em> [-p <em class="replaceable"><code>port</code></em>] [-r] [-g <em class="replaceable"><code>group</code></em>] [-c <em class="replaceable"><code>config_file</code></em>]</strong></span><br />
                           <span class="command"><strong>swarm-trigger.pl -o</strong></span><br />
                           <span class="command"><strong>swarm-trigger.pl -h</strong></span><br />
                           
                        </p>
                     </div>
                  </div>
                  <div class="section" id="admin.trigger.options.informational">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title">Informational options</h4>
                           </div>
                        </div>
                     </div>
                     <p>
                                The following options perform no processing, and simply provide
                                information useful to a Swarm administrator. These are not intended to
                                be used within trigger entries in the Helix Versioning Engine.
                              
                     </p>
                     <div class="variablelist">
                        <dl class="variablelist">
                           <dt><span class="term"><code class="option">-h</code></span></dt>
                           <dd>
                              <p>
                                               Displays a list of the available options, some guidance on its
                                               usage, and a copy of the trigger table entries that should be
                                               configured in the Helix Versioning Engine to execute the script in
                                               its current path.
                                             
                              </p>
                           </dd>
                           <dt><span class="term"><code class="option">-o</code></span></dt>
                           <dd>
                              <p>
                                               Displays a copy of the trigger table entries that should be
                                               configured in the Helix Versioning Engine to execute the script in
                                               its current path.
                                             
                              </p>
                           </dd>
                        </dl>
                     </div>
                  </div>
                  <div class="section" id="admin.trigger.options.operational">
                     <div class="titlepage">
                        <div>
                           <div>
                              <h4 class="title">Operational options</h4>
                           </div>
                        </div>
                     </div>
                     <p>
                                The following command-line options are used in the trigger table entries
                                in the Helix Versioning Engine to specify how the Swarm trigger script
                                should be executed.
                              
                     </p>
                     <div class="variablelist">
                        <dl class="variablelist">
                           <dt><span class="term"><code class="option">-t <em class="replaceable"><code>type</code></em></code></span></dt>
                           <dd>
                              <p>
                                               Specifies the type of processing that the trigger script undertakes.
                                               <em class="replaceable"><code>type</code></em> can be one of:
                                             
                              </p>
                              <div class="itemizedlist">
                                 <ul class="itemizedlist" style="list-style-type: disc; ">
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">changesave</code></strong></span>:
                                                            this type should be used with Perforce
                                                            <code class="literal">form-save</code> events for <code class="literal">change</code>
                                                            forms, and informs Swarm when a changelist is created or modified.
                                                          
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">commit</code></strong></span>: this
                                                            type should be used with Perforce <code class="literal">change-commit</code>
                                                            events, and informs Swarm when a changelist is committed.
                                                          
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">enforce</code></strong></span>: this
                                                            type is used to verify that commits to specific depot paths are
                                                            associated with approved reviews. If a commit includes a file
                                                            within the specified depot path, and it is not associated with a
                                                            review (or a review that is not approved), the commit is rejected.
                                                          
                                       </p>
                                       <p>
                                                            Using the <code class="literal">enforce</code> type prevents users from
                                                            committing changes to specific depot paths without those
                                                            changes being reviewed and approved,
                                                          
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">group</code></strong></span>: this
                                                            type should be used with Perforce <code class="literal">form-commit</code>
                                                            events for <code class="literal">group</code> forms, and informs Swarm when
                                                            a group is created or modified.
                                                          
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">groupdel</code></strong></span>: this
                                                            type should be used with Perforce <code class="literal">form-delete</code>
                                                            events for <code class="literal">group</code> forms, and informs Swarm when
                                                            a group is deleted.
                                                          
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">job</code></strong></span>: this type
                                                            should be used with Perforce <code class="literal">form-commit</code> events
                                                            for <code class="literal">job</code> forms, and informs Swarm when a job is
                                                            created or modified.
                                                          
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">shelve</code></strong></span>: this
                                                            type should be used with Perforce <code class="literal">shelve-commit</code>
                                                            events, and informs Swarm when a changelist is shelved, which can
                                                            create or update a review.
                                                          
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">strict</code></strong></span>: this
                                                            type is used to verify that the file content in a commit matches
                                                            the file content of its associated approved review. If one or more
                                                            files in a commit do not match the content of the file in its
                                                            associated review, the commit is rejected.
                                                          
                                       </p>
                                       <p>
                                                            Using the <code class="literal">strict</code> type prevents users from
                                                            making changes to the file content after a review has been
                                                            approved and then submitting the unapproved changes.
                                                          
                                       </p>
                                       <div class="note admonition">
                                          <h3 class="title">Note</h3>
                                          <p>
                                                                 <code class="literal">strict</code> implies
                                                                 <code class="literal">enforce</code>.
                                                               
                                          </p>
                                       </div>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">user</code></strong></span>: this
                                                            type should be used with Perforce <code class="literal">form-commit</code>
                                                            events for <code class="literal">user</code> forms, which informs Swarm when
                                                            a user is added or modified.
                                                          
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>
                                                            <span class="bold"><strong><code class="literal">userdel</code></strong></span>: this
                                                            type should be used with Perforce <code class="literal">form-delete</code>
                                                            events for <code class="literal">user</code> forms, which informs Swarm when
                                                            a user is deleted.
                                                          
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              <div class="important admonition">
                                 <h3 class="title">Important</h3>
                                 <p>
                                                    You cannot mix Swarm trigger types with unrelated Perforce events;
                                                    the behavior is undetermined, and the information required for each
                                                    type of processing may not be available to the trigger.
                                                  
                                 </p>
                              </div>
                           </dd>
                           <dt><span class="term"><code class="option">-v <em class="replaceable"><code>ID</code></em></code></span></dt>
                           <dd>
                              <p>
                                               Specifies <em class="replaceable"><code>ID</code></em>, which is the identifier for
                                               the current trigger type.
                                             
                              </p>
                              <p>
                                               When the <em class="replaceable"><code>type</code></em> is <code class="literal">job</code>,
                                               <code class="literal">user</code>, <code class="literal">userdel</code>,
                                               <code class="literal">group</code>, <code class="literal">groupdel</code>, or
                                               <code class="literal">changesave</code>, <em class="replaceable"><code>ID</code></em> should be
                                               <code class="literal">%formname%</code> to specify the specific form identifier
                                               Swarm should process.
                                             
                              </p>
                              <p>
                                               When the <em class="replaceable"><code>type</code></em> is <code class="literal">shelve</code>,
                                               <code class="literal">commit</code>, <code class="literal">enforce</code>, or
                                               <code class="literal">strict</code>, <em class="replaceable"><code>ID</code></em> should be
                                               <code class="literal">%change%</code> to specify the specific changelist Swarm
                                               should process.
                                             
                              </p>
                           </dd>
                           <dt><span class="term"><code class="option">-p <em class="replaceable"><code>port</code></em></code> (optional)</span></dt>
                           <dd>
                              <p>
                                               Specifies the Helix Versioning Engine port
                                               (<code class="envar">P4PORT</code>). This value is optional, and is only used
                                               for types <code class="literal">enforce</code> or <code class="literal">strict</code>
                                               as the trigger has to run its own commands against the Helix
                                               Versioning Engine during its processing.
                                             
                              </p>
                           </dd>
                           <dt><span class="term"><code class="option">-r</code> (optional)</span></dt>
                           <dd>
                              <p>
                                               Specifies that, when types <code class="literal">enforce</code> or
                                               <code class="literal">strict</code> are being processed, the verifications
                                               should only be performed on commits that are currently in review.
                                             
                              </p>
                           </dd>
                           <dt><span class="term">
                                             <code class="option">-g <em class="replaceable"><code>group</code></em></code> (optional)
                                           </span></dt>
                           <dd>
                              <p>
                                               Specifies a <em class="replaceable"><code>group</code></em> to exclude from
                                               <code class="literal">enforce</code> or <code class="literal">strict</code>
                                               verifications. Members of the <em class="replaceable"><code>group</code></em>
                                               (including sub-groups) are not subject to <code class="literal">enforce</code>
                                               or <code class="literal">strict</code> verifications.
                                             
                              </p>
                           </dd>
                           <dt><span class="term">
                                             <code class="option">-c <em class="replaceable"><code>config_file</code></em></code> (optional)
                                           </span></dt>
                           <dd>
                              <p>
                                               Specifies an optional <em class="replaceable"><code>config_file</code></em> which
                                               is used to specify configuration items.
                                             
                              </p>
                           </dd>
                        </dl>
                     </div>
                  </div>
               </div>
               <div class="section" id="admin.trigger.configuration_items">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title">Configuration items</h3>
                        </div>
                     </div>
                  </div>
                  <p>
                           The following configuration items are used in the
                           <code class="filename">swarm-trigger.conf</code> (or another file, if the
                           <code class="option">-c</code> option is used in the trigger entries).
                         
                  </p>
                  <div class="variablelist">
                     <dl class="variablelist">
                        <dt><span class="term"><code class="literal">SWARM_HOST</code> (required)</span></dt>
                        <dd>
                           <p>
                                          Specifies the host URL of your Swarm instance, with the leading
                                          <code class="literal">http://</code> or <code class="literal">https://</code>. For
                                          example: <code class="literal">https://myswarm.url</code>
                                        
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">SWARM_TOKEN</code> (required)</span></dt>
                        <dd>
                           <p>
                                          A token used when talking to Swarm. To obtain the token, log into
                                          Swarm as a user with <span class="emphasis"><em>super</em></span> privileges and
                                          select <span class="guilabel"><a class="xref" href="basics.notable.html#basics.notable.about" title="About Swarm">About Swarm</a></span>
                                          from the user menu in the main navigation bar.
                                        
                           </p>
                           <p>
                                          You can also manually create additional tokens. Tokens are empty
                                          files stored within
                                          <code class="filename"><a class="link" href="admin.swarm_root.html" title="swarm_root"><em class="replaceable"><code>SWARM_ROOT</code></em></a>/data/queue/tokens</code> (the filename is
                                          the token and is reported on the
                                          <span class="guilabel"><a class="xref" href="basics.notable.html#basics.notable.about" title="About Swarm">About Swarm</a></span> dialog),
                                          that should be readable by the web server.
                                        
                           </p>
                           <p>
                                          You might manually create additional tokens to allow other processes
                                          to talk to Swarm, such as JIRA build tasks, and to selectively
                                          invalidate access to Swarm without interfering with regular Swarm
                                          operations.
                                        
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">ADMIN_USER</code> (optional)</span></dt>
                        <dd>
                           <p>
                                          When <code class="literal">enforce</code> or <code class="literal">strict</code>
                                          verifications are to be performed, you may need specify a username
                                          of a user in the Helix Versioning Engine that has
                                          <span class="emphasis"><em>admin</em></span> privileges. If you do not specify a
                                          username, the trigger script uses the Perforce user set in the
                                          environment.
                                        
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">ADMIN_TICKET_FILE</code> (optional)</span></dt>
                        <dd>
                           <p>
                                          When <code class="literal">enforce</code> or <code class="literal">strict</code>
                                          verifications are to be performed, you may need specify the path
                                          to the <code class="filename">.p4tickets</code> file, if your Helix
                                          Versioning Engine tickets file is not the default
                                          <code class="filename">$HOME/.p4tickets</code>.
                                        
                           </p>
                           <div class="important admonition">
                              <h3 class="title">Important</h3>
                              <p>
                                               Ensure that the ticket belongs to a user with
                                               <span class="emphasis"><em>admin</em></span> privileges in the Helix Versioning
                                               Engine, and is a member of a group with an
                                               <code class="literal">unlimited</code> or very long ticket timeout. If this
                                               user's authentication times out, <code class="literal">enforce</code> and
                                               <code class="literal">strict</code> verifications stop working.
                                             
                              </p>
                           </div>
                        </dd>
                        <dt><span class="term"><code class="literal">P4_PORT</code> (optional)</span></dt>
                        <dd>
                           <p>
                                          When <code class="literal">enforce</code> or <code class="literal">strict</code>
                                          verifications are to be performed, you may need to set the port
                                          value (<code class="envar">P4PORT</code>) of the Helix Versioning Engine,
                                          particularly if the Helix Versioning Engine is on a non-standard
                                          port, or if the Helix Versioning Engine is not using the default
                                          hostname.
                                        
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">P4</code> (optional)</span></dt>
                        <dd>
                           <p>
                                          Specifies the full path to <span class="command"><strong>p4</strong></span>, the Perforce
                                          command-line client. This is only required when
                                          <span class="command"><strong>p4</strong></span> is not found in the <code class="envar">PATH</code> of the
                                          Helix Versioning Engine's environment, and when
                                          <code class="literal">enforce</code> or <code class="literal">strict</code>
                                          verifications are to be performed.
                                        
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">EXEMPT_FILE_COUNT</code> (optional)</span></dt>
                        <dd>
                           <p>
                                          When set to a positive integer, commits with a file count greater or
                                          equal to this value are exempt from <code class="literal">enforce</code> or
                                          <code class="literal">strict</code> verifications.
                                        
                           </p>
                        </dd>
                        <dt><span class="term"><code class="literal">EXEMPT_EXTENSIONS</code> (optional)</span></dt>
                        <dd>
                           <p>
                                          A comma-separated list of file extensions. Commits with files having
                                          <span class="emphasis"><em>only</em></span> these extensions are exempt from
                                          <code class="literal">enforce</code> or <code class="literal">strict</code>
                                          verifications.
                                        
                           </p>
                        </dd>
                     </dl>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="nav" class="toc"></div>
      <div id="search">
         <div class="input"><input id="search-text" type="search" placeholder="Search this guide" /><button name="clear" type="button" class="clear"><span class="glyphicon glyphicon-remove-sign"></span></button></div>
         <div class="controls">
            <div class="substring"><label><input type="checkbox" class="substring" name="substring" value="hide" checked="1" /><span class="description">Hide partial matches</span></label></div>
            <div class="highlighter"><label><input type="checkbox" class="highlight" name="highlight" value="show" checked="1" /><span class="description">Highlight matches</span></label></div>
         </div>
         <div class="count"><span class="number">0</span> matching pages
                  
         </div>
         <ul class="results"></ul>
      </div>
      <div id="footer">
         <div class="container"><a accesskey="p" class="nav-prev" title="Press 'p', or left-arrow, to view the previous page" href="admin.system_information.html"><span class="glyphicon glyphicon-chevron-left"></span><div class="label">Previous</div>
               <div class="title">System Information</div></a><a accesskey="n" class="nav-next" title="Press 'n', or right-arrow, to view the next page" href="admin.unapprove_modified.html"><span class="glyphicon glyphicon-chevron-right"></span><div class="label">Next</div>
               <div class="title">Unapprove modified reviews</div></a></div>
      </div><script type="text/javascript" src="vendor/jquery/jquery-1.11.3.min.js"></script><script type="text/javascript" src="vendor/bootstrap/js/bootstrap.js"></script><script type="text/javascript" src="vendor/cookie/jquery.cookie.js"></script><script type="text/javascript" src="vendor/highlight/jquery.highlight.js"></script><script type="text/javascript" src="vendor/jsrender/jsrender.js"></script><script type="text/javascript" src="vendor/touchwipe/jquery.touchwipe.min.js"></script><script type="text/javascript" src="vendor/prettify/prettify.js"></script><script defer="1" type="text/javascript" src="js/index.js"></script><script defer="1" type="text/javascript" src="js/toc.js"></script><script defer="1" type="text/javascript" src="js/perforce.js"></script></body>
</html>